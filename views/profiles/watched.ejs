<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/animes/catalog.css">
<%- include('../partials/nav') %>

<main>
  <div>
    <div class="header">
      <h1><%= title %></h1>
      <form action="/profiles/watched" method="POST">
        <select name="animeId">
          <% animes.forEach(anime => { %>
            <option value="<%=anime._id %>"><%= anime.title %></option>
          <% }) %>
        </select>
        <button type="submit"> Add Anime</button>
      </form>
    </div>
    <div class="card-container">
      <% if (!profile.watchedList.length) { %>
        <h2>No Anime</h2>
      <% } else { %>
        <% profile.watchedList.forEach(anime => { %>
          <a class="text-decoration-none" href="/catalog/<%= anime._id %>">
            <div class="card">
              <img 
                src="<%= anime.imageURL %>" 
                alt="<%= anime.title %>'s cover image"
                width="100px"
              >
              <div class="card-body">
                <div class="card-body-left">
                  <div class="card-title"><%= anime.title %></div>
                  <div class="card-release"><%= anime.releaseYear.getFullYear()+1%> </div>
                </div>
                <div class="card-body-right">Rating: <%= anime.rating ? anime.rating : "N/A" %></div>
              </div>
              <!-- delete -->
              <form action="watched/<%= anime._id %>/?_method=DELETE" method="POST">
                <button class="delete-button">üóëÔ∏è</button>
              </form>
            </div>
          </a>
          <hr/>
        <% }) %>
      <% } %>
    </div>
  </div>
</main>

<%- include('../partials/footer') %>
